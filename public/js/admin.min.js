function htmlEncode(value){return $("<div/>").text(value).html()}var first_message=1;blink=setInterval(function(){0==blink_val?($("#blink_cursor").css("background-color","#aaa"),$("#blink_cursor").css("color","#000"),blink_val=1):($("#blink_cursor").css("background-color","#000"),$("#blink_cursor").css("color","#aaa"),blink_val=0)},500),clearInterval(blink),blink_val=0,$("body").delegate("#blink_cursor","blinking_event",function(){blink=setInterval(function(){0==blink_val?($("#blink_cursor").css("background-color","#aaa"),$("#blink_cursor").css("color","#000"),blink_val=1):($("#blink_cursor").css("background-color","#000"),$("#blink_cursor").css("color","#aaa"),blink_val=0)},500)}),$.fn.teletype=function(opts){0==first_message&&(writing=1),$("#blink_cursor").remove(),clearInterval(blink);var $this=this,defaults={animDelay:50},settings=$.extend(defaults,opts);$.each(settings.text.split(""),function(i,letter){setTimeout(function(){$this.html($this.html()+letter),i==settings.text.length-1&&0==first_message&&(writing=0)},settings.animDelay*i)}),"undefined"!=typeof settings.prepend_text&&setTimeout(function(){$("#console").prepend(settings.prepend_text),setTimeout(function(){$(".new_line").first().append('<span id="blink_cursor">&nbsp;</span>'),$("#blink_cursor").trigger("blinking_event"),0==first_message&&(writing=0)},100)},settings.animDelay*settings.text.length+50)},setTimeout(function(){$("#console").prepend('<p class="new_line">$ </p>'),$(".new_line").first().teletype({animDelay:50,text:"ssh "+$("#team").text()+"@inso2k15"}),setTimeout(function(){$("#console").prepend($('<p class="new_line"></p>').text($("#team").text()+"@inso2k15's password:")),setTimeout(function(){$(".new_line").first().teletype({animDelay:100,text:"**********"}),setTimeout(function(){$("#console").prepend('<p class="new_line">Welcome on Insomni\'hack communicator</p>'),setTimeout(function(){$("#console").prepend($('<p class="new_line"></p>').text($("#team").text()+"@inso2k15$ ")),setTimeout(function(){$(".new_line").first().teletype({animDelay:100,text:"tail -f /var/log/messages"}),setTimeout(function(){sock.emit("getMessages")},3e3)},500)},500)},1500)},1e3)},1800)},2e3),$(document).ready(function(){var sock=io.connect(socketIOUrl);$("#closeCTF").click(function(){sock.emit("adminCloseCTF")}),$("#openCTF").click(function(){sock.emit("adminOpenCTF")}),$("#closeRegistration").click(function(){sock.emit("adminCloseRegistration")}),$("#openRegistration").click(function(){sock.emit("adminOpenRegistration")}),$("#teams").change(function(){""===$(this).val()?($("#addTeam").css("display","inline"),$("#editTeam").css("display","none"),$("#deleteTeam").css("display","none"),$("#teamName").val(""),$("#teamName").attr("disabled",!1),$("#teamName").focus()):($("#addTeam").css("display","none"),$("#editTeam").css("display","inline"),$("#deleteTeam").css("display","inline"),$("#teamName").val($(this).val()),$("#teamName").attr("disabled",!0),$("#teamPassword").focus())}),$("#tasks").change(function(){""===$(this).val()?($("#addTask").css("display","inline"),$("#editTask").css("display","none"),$("#deleteTask").css("display","none"),$("#taskTitle").val(""),$("#taskTitle").attr("disabled",!1),$("#taskTitle").focus()):($("#addTask").css("display","none"),$("#editTask").css("display","inline"),$("#deleteTask").css("display","inline"),sock.emit("getTask",$(this).val()))}),sock.on("giveTask",function(task){$("#taskTitle").val(task.title),$("#taskTitle").attr("disabled",!0),$("#taskFlag").focus(),$("#taskType").val(task.type),$("#taskAuthor").val(task.author),$("#taskDescription").val(task.description),$('#taskDifficulty option[value="'+task.difficulty+'"]').attr("selected","selected")}),sock.emit("adminListTasks"),sock.on("updateTasks",function(tasks){$("#tasks").html(""),$("#tasks").append($("<option></option>").val("").text("---- Tasks ----")),tasks.forEach(function(task){$("#tasks").append($("<option></option>").val(task.title).text(task.title))})}),sock.emit("adminListTeams"),sock.on("updateTeams",function(teams){console.log(teams),$("#teams").html(""),$("#teams").append($("<option></option>").val("").text("---- Teams ----")),teams.forEach(function(team){$("#teams").append($("<option></option>").val(team.name).text(team.name))})}),$("#addTeam").click(function(){sock.emit("adminAddTeam",{name:$("#teamName").val(),password:$("#teamPassword").val()}),$("#teamName").val(""),$("#teamPassword").val("")}),$("#editTeam").click(function(){sock.emit("adminEditTeam",{name:$("#teamName").val(),password:$("#teamPassword").val()}),$("#teamName").val(""),$("#teamPassword").val("")}),$("#deleteTeam").click(function(){sock.emit("adminDeleteTeam",{name:$("#teamName").val()}),$("#teamName").val(""),$("#teamPassword").val("")}),$("#addTask").click(function(){sock.emit("adminAddTask",{title:$("#taskTitle").val(),flag:$("#taskFlag").val(),type:$("#taskType").val(),author:$("#taskAuthor").val(),difficulty:$("#taskDifficulty").val(),description:$("#taskDescription").val()}),$("#taskTitle").val(""),$("#taskFlag").val(""),$("#taskType").val(""),$("#taskAuthor").val(""),$("#taskDescription").val("")}),$("#editTask").click(function(){sock.emit("adminEditTask",{title:$("#taskTitle").val(),flag:$("#taskFlag").val(),type:$("#taskType").val(),author:$("#taskAuthor").val(),difficulty:$("#taskDifficulty").val(),description:$("#taskDescription").val()}),$("#taskTitle").val(""),$("#taskFlag").val(""),$("#taskType").val(""),$("#taskAuthor").val(""),$("#taskDescription").val("")}),$("#deleteTask").click(function(){sock.emit("adminDeleteTask",{title:$("#taskTitle").val()}),$("#taskTitle").val(""),$("#taskFlag").val(""),$("#taskType").val(""),$("#taskAuthor").val(""),$("#taskDescription").val("")})});